var Gi=Object.defineProperty;var Er=e=>{throw TypeError(e)};var Vi=(e,t,n)=>t in e?Gi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var He=(e,t,n)=>Vi(e,typeof t!="symbol"?t+"":t,n),zn=(e,t,n)=>t.has(e)||Er("Cannot "+n);var u=(e,t,n)=>(zn(e,t,"read from private field"),n?n.call(e):t.get(e)),L=(e,t,n)=>t.has(e)?Er("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),N=(e,t,n,r)=>(zn(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Q=(e,t,n)=>(zn(e,t,"access private method"),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();const Un=!1;var sr=Array.isArray,Ui=Array.prototype.indexOf,Gt=Array.prototype.includes,Nn=Array.from,Wi=Object.defineProperty,Ct=Object.getOwnPropertyDescriptor,Yi=Object.getOwnPropertyDescriptors,Ki=Object.prototype,Ji=Array.prototype,jr=Object.getPrototypeOf,Tr=Object.isExtensible;const Zi=()=>{};function Xi(e){for(var t=0;t<e.length;t++)e[t]()}function Br(){var e,t,n=new Promise((r,i)=>{e=r,t=i});return{promise:n,resolve:e,reject:t}}const re=2,cn=4,On=8,zr=1<<24,et=16,Be=32,dt=64,Wn=128,Ae=512,ee=1024,ie=2048,je=4096,pe=8192,Xe=16384,St=32768,Vt=65536,kr=1<<17,Hr=1<<18,It=1<<19,Qi=1<<20,Ze=1<<25,At=65536,Yn=1<<21,or=1<<22,st=1<<23,Lt=Symbol("$state"),$i=Symbol("legacy props"),ea=Symbol(""),ht=new class extends Error{constructor(){super(...arguments);He(this,"name","StaleReactionError");He(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function ta(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function na(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function ra(e,t,n){throw new Error("https://svelte.dev/e/each_key_duplicate")}function ia(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function aa(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function la(e){throw new Error("https://svelte.dev/e/effect_orphan")}function sa(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function oa(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function fa(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function ua(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ca(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function da(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const va=1,ha=2,qr=4,_a=8,ga=16,ba=1,pa=4,ma=8,ya=16,wa=1,Ea=2,te=Symbol(),Gr="http://www.w3.org/1999/xhtml";function Ta(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function ka(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Vr(e){return e===this.v}function xa(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Ur(e){return!xa(e,this.v)}let Sa=!1,me=null;function Ut(e){me=e}function Me(e,t=!1,n){me={p:me,i:!1,c:null,e:null,s:e,x:null,l:null}}function Ne(e){var t=me,n=t.e;if(n!==null){t.e=null;for(var r of n)hi(r)}return t.i=!0,me=t.p,{}}function Wr(){return!0}let _t=[];function Yr(){var e=_t;_t=[],Xi(e)}function Qe(e){if(_t.length===0&&!en){var t=_t;queueMicrotask(()=>{t===_t&&Yr()})}_t.push(e)}function Aa(){for(;_t.length>0;)Yr()}function Kr(e){var t=z;if(t===null)return P.f|=st,e;if((t.f&St)===0&&(t.f&cn)===0)throw e;lt(e,t)}function lt(e,t){for(;t!==null;){if((t.f&Wn)!==0){if((t.f&St)===0)throw e;try{t.b.error(e);return}catch(n){e=n}}t=t.parent}throw e}const Da=-7169;function J(e,t){e.f=e.f&Da|t}function fr(e){(e.f&Ae)!==0||e.deps===null?J(e,ee):J(e,je)}function Jr(e){if(e!==null)for(const t of e)(t.f&re)===0||(t.f&At)===0||(t.f^=At,Jr(t.deps))}function Zr(e,t,n){(e.f&ie)!==0?t.add(e):(e.f&je)!==0&&n.add(e),Jr(e.deps),J(e,ee)}const mn=new Set;let I=null,An=null,ne=null,ue=[],Pn=null,Kn=!1,en=!1;var Rt,Ft,mt,jt,sn,on,yt,Ye,Bt,ye,Jn,Zn,Xn,Xr;const br=class br{constructor(){L(this,ye);He(this,"current",new Map);He(this,"previous",new Map);L(this,Rt,new Set);L(this,Ft,new Set);L(this,mt,0);L(this,jt,0);L(this,sn,null);L(this,on,new Set);L(this,yt,new Set);L(this,Ye,new Map);He(this,"is_fork",!1);L(this,Bt,!1)}skip_effect(t){u(this,Ye).has(t)||u(this,Ye).set(t,{d:[],m:[]})}unskip_effect(t){var n=u(this,Ye).get(t);if(n){u(this,Ye).delete(t);for(var r of n.d)J(r,ie),Re(r);for(r of n.m)J(r,je),Re(r)}}process(t){var i;ue=[],this.apply();var n=[],r=[];for(const a of t)Q(this,ye,Zn).call(this,a,n,r);if(Q(this,ye,Jn).call(this)){Q(this,ye,Xn).call(this,r),Q(this,ye,Xn).call(this,n);for(const[a,l]of u(this,Ye))ti(a,l)}else{for(const a of u(this,Rt))a();u(this,Rt).clear(),u(this,mt)===0&&Q(this,ye,Xr).call(this),An=this,I=null,xr(r),xr(n),An=null,(i=u(this,sn))==null||i.resolve()}ne=null}capture(t,n){n!==te&&!this.previous.has(t)&&this.previous.set(t,n),(t.f&st)===0&&(this.current.set(t,t.v),ne==null||ne.set(t,t.v))}activate(){I=this,this.apply()}deactivate(){I===this&&(I=null,ne=null)}flush(){if(this.activate(),ue.length>0){if(Qr(),I!==null&&I!==this)return}else u(this,mt)===0&&this.process([]);this.deactivate()}discard(){for(const t of u(this,Ft))t(this);u(this,Ft).clear()}increment(t){N(this,mt,u(this,mt)+1),t&&N(this,jt,u(this,jt)+1)}decrement(t){N(this,mt,u(this,mt)-1),t&&N(this,jt,u(this,jt)-1),!u(this,Bt)&&(N(this,Bt,!0),Qe(()=>{N(this,Bt,!1),Q(this,ye,Jn).call(this)?ue.length>0&&this.flush():this.revive()}))}revive(){for(const t of u(this,on))u(this,yt).delete(t),J(t,ie),Re(t);for(const t of u(this,yt))J(t,je),Re(t);this.flush()}oncommit(t){u(this,Rt).add(t)}ondiscard(t){u(this,Ft).add(t)}settled(){return(u(this,sn)??N(this,sn,Br())).promise}static ensure(){if(I===null){const t=I=new br;mn.add(I),en||Qe(()=>{I===t&&t.flush()})}return I}apply(){}};Rt=new WeakMap,Ft=new WeakMap,mt=new WeakMap,jt=new WeakMap,sn=new WeakMap,on=new WeakMap,yt=new WeakMap,Ye=new WeakMap,Bt=new WeakMap,ye=new WeakSet,Jn=function(){return this.is_fork||u(this,jt)>0},Zn=function(t,n,r){t.f^=ee;for(var i=t.first;i!==null;){var a=i.f,l=(a&(Be|dt))!==0,o=l&&(a&ee)!==0,s=o||(a&pe)!==0||u(this,Ye).has(i);if(!s&&i.fn!==null){l?i.f^=ee:(a&cn)!==0?n.push(i):vn(i)&&((a&et)!==0&&u(this,yt).add(i),Kt(i));var f=i.first;if(f!==null){i=f;continue}}for(;i!==null;){var d=i.next;if(d!==null){i=d;break}i=i.parent}}},Xn=function(t){for(var n=0;n<t.length;n+=1)Zr(t[n],u(this,on),u(this,yt))},Xr=function(){var i;if(mn.size>1){this.previous.clear();var t=ne,n=!0;for(const a of mn){if(a===this){n=!1;continue}const l=[];for(const[s,f]of this.current){if(a.current.has(s))if(n&&f!==a.current.get(s))a.current.set(s,f);else continue;l.push(s)}if(l.length===0)continue;const o=[...a.current.keys()].filter(s=>!this.current.has(s));if(o.length>0){var r=ue;ue=[];const s=new Set,f=new Map;for(const d of l)$r(d,o,s,f);if(ue.length>0){I=a,a.apply();for(const d of ue)Q(i=a,ye,Zn).call(i,d,[],[]);a.deactivate()}ue=r}}I=null,ne=t}mn.delete(this)};let $e=br;function Ia(e){var t=en;en=!0;try{for(var n;;){if(Aa(),ue.length===0&&(I==null||I.flush(),ue.length===0))return Pn=null,n;Qr()}}finally{en=t}}function Qr(){Kn=!0;var e=null;try{for(var t=0;ue.length>0;){var n=$e.ensure();if(t++>1e3){var r,i;Ma()}n.process(ue),ot.clear()}}finally{ue=[],Kn=!1,Pn=null}}function Ma(){try{sa()}catch(e){lt(e,Pn)}}let Oe=null;function xr(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(Xe|pe))===0&&vn(r)&&(Oe=new Set,Kt(r),r.deps===null&&r.first===null&&r.nodes===null&&r.teardown===null&&r.ac===null&&bi(r),(Oe==null?void 0:Oe.size)>0)){ot.clear();for(const i of Oe){if((i.f&(Xe|pe))!==0)continue;const a=[i];let l=i.parent;for(;l!==null;)Oe.has(l)&&(Oe.delete(l),a.push(l)),l=l.parent;for(let o=a.length-1;o>=0;o--){const s=a[o];(s.f&(Xe|pe))===0&&Kt(s)}}Oe.clear()}}Oe=null}}function $r(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const i of e.reactions){const a=i.f;(a&re)!==0?$r(i,t,n,r):(a&(or|et))!==0&&(a&ie)===0&&ei(i,t,r)&&(J(i,ie),Re(i))}}function ei(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const i of e.deps){if(Gt.call(t,i))return!0;if((i.f&re)!==0&&ei(i,t,n))return n.set(i,!0),!0}return n.set(e,!1),!1}function Re(e){var t=Pn=e,n=t.b;if(n!=null&&n.is_pending&&(e.f&(cn|On|zr))!==0&&(e.f&St)===0){n.defer_effect(e);return}for(;t.parent!==null;){t=t.parent;var r=t.f;if(Kn&&t===z&&(r&et)!==0&&(r&Hr)===0&&(r&St)!==0)return;if((r&(dt|Be))!==0){if((r&ee)===0)return;t.f^=ee}}ue.push(t)}function ti(e,t){if(!((e.f&Be)!==0&&(e.f&ee)!==0)){(e.f&ie)!==0?t.d.push(e):(e.f&je)!==0&&t.m.push(e),J(e,ee);for(var n=e.first;n!==null;)ti(n,t),n=n.next}}function Na(e){let t=0,n=Dt(0),r;return()=>{cr()&&(c(n),_i(()=>(t===0&&(r=Fn(()=>e(()=>tn(n)))),t+=1,()=>{Qe(()=>{t-=1,t===0&&(r==null||r(),r=void 0,tn(n))})})))}}var Oa=Vt|It;function Pa(e,t,n,r){new Ca(e,t,n,r)}var xe,lr,qe,wt,fe,Ge,_e,Pe,Ke,Et,at,zt,Ht,qt,Je,In,X,La,Ra,Fa,Qn,Tn,kn,$n;class Ca{constructor(t,n,r,i){L(this,X);He(this,"parent");He(this,"is_pending",!1);He(this,"transform_error");L(this,xe);L(this,lr,null);L(this,qe);L(this,wt);L(this,fe);L(this,Ge,null);L(this,_e,null);L(this,Pe,null);L(this,Ke,null);L(this,Et,0);L(this,at,0);L(this,zt,!1);L(this,Ht,new Set);L(this,qt,new Set);L(this,Je,null);L(this,In,Na(()=>(N(this,Je,Dt(u(this,Et))),()=>{N(this,Je,null)})));var a;N(this,xe,t),N(this,qe,n),N(this,wt,l=>{var o=z;o.b=this,o.f|=Wn,r(l)}),this.parent=z.b,this.transform_error=i??((a=this.parent)==null?void 0:a.transform_error)??(l=>l),N(this,fe,vr(()=>{Q(this,X,Qn).call(this)},Oa))}defer_effect(t){Zr(t,u(this,Ht),u(this,qt))}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!u(this,qe).pending}update_pending_count(t){Q(this,X,$n).call(this,t),N(this,Et,u(this,Et)+t),!(!u(this,Je)||u(this,zt))&&(N(this,zt,!0),Qe(()=>{N(this,zt,!1),u(this,Je)&&Wt(u(this,Je),u(this,Et))}))}get_effect_pending(){return u(this,In).call(this),c(u(this,Je))}error(t){var n=u(this,qe).onerror;let r=u(this,qe).failed;if(!n&&!r)throw t;u(this,Ge)&&(oe(u(this,Ge)),N(this,Ge,null)),u(this,_e)&&(oe(u(this,_e)),N(this,_e,null)),u(this,Pe)&&(oe(u(this,Pe)),N(this,Pe,null));var i=!1,a=!1;const l=()=>{if(i){ka();return}i=!0,a&&da(),u(this,Pe)!==null&&kt(u(this,Pe),()=>{N(this,Pe,null)}),Q(this,X,kn).call(this,()=>{$e.ensure(),Q(this,X,Qn).call(this)})},o=s=>{try{a=!0,n==null||n(s,l),a=!1}catch(f){lt(f,u(this,fe)&&u(this,fe).parent)}r&&N(this,Pe,Q(this,X,kn).call(this,()=>{$e.ensure();try{return Se(()=>{var f=z;f.b=this,f.f|=Wn,r(u(this,xe),()=>s,()=>l)})}catch(f){return lt(f,u(this,fe).parent),null}}))};Qe(()=>{var s;try{s=this.transform_error(t)}catch(f){lt(f,u(this,fe)&&u(this,fe).parent);return}s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(o,f=>lt(f,u(this,fe)&&u(this,fe).parent)):o(s)})}}xe=new WeakMap,lr=new WeakMap,qe=new WeakMap,wt=new WeakMap,fe=new WeakMap,Ge=new WeakMap,_e=new WeakMap,Pe=new WeakMap,Ke=new WeakMap,Et=new WeakMap,at=new WeakMap,zt=new WeakMap,Ht=new WeakMap,qt=new WeakMap,Je=new WeakMap,In=new WeakMap,X=new WeakSet,La=function(){try{N(this,Ge,Se(()=>u(this,wt).call(this,u(this,xe))))}catch(t){this.error(t)}},Ra=function(t){const n=u(this,qe).failed;n&&N(this,Pe,Se(()=>{n(u(this,xe),()=>t,()=>()=>{})}))},Fa=function(){const t=u(this,qe).pending;t&&(this.is_pending=!0,N(this,_e,Se(()=>t(u(this,xe)))),Qe(()=>{var n=N(this,Ke,document.createDocumentFragment()),r=ft();n.append(r),N(this,Ge,Q(this,X,kn).call(this,()=>($e.ensure(),Se(()=>u(this,wt).call(this,r))))),u(this,at)===0&&(u(this,xe).before(n),N(this,Ke,null),kt(u(this,_e),()=>{N(this,_e,null)}),Q(this,X,Tn).call(this))}))},Qn=function(){try{if(this.is_pending=this.has_pending_snippet(),N(this,at,0),N(this,Et,0),N(this,Ge,Se(()=>{u(this,wt).call(this,u(this,xe))})),u(this,at)>0){var t=N(this,Ke,document.createDocumentFragment());yi(u(this,Ge),t);const n=u(this,qe).pending;N(this,_e,Se(()=>n(u(this,xe))))}else Q(this,X,Tn).call(this)}catch(n){this.error(n)}},Tn=function(){this.is_pending=!1;for(const t of u(this,Ht))J(t,ie),Re(t);for(const t of u(this,qt))J(t,je),Re(t);u(this,Ht).clear(),u(this,qt).clear()},kn=function(t){var n=z,r=P,i=me;Ue(u(this,fe)),Ie(u(this,fe)),Ut(u(this,fe).ctx);try{return t()}catch(a){return Kr(a),null}finally{Ue(n),Ie(r),Ut(i)}},$n=function(t){var n;if(!this.has_pending_snippet()){this.parent&&Q(n=this.parent,X,$n).call(n,t);return}N(this,at,u(this,at)+t),u(this,at)===0&&(Q(this,X,Tn).call(this),u(this,_e)&&kt(u(this,_e),()=>{N(this,_e,null)}),u(this,Ke)&&(u(this,xe).before(u(this,Ke)),N(this,Ke,null)))};function ja(e,t,n,r){const i=Cn;var a=e.filter(v=>!v.settled);if(n.length===0&&a.length===0){r(t.map(i));return}var l=z,o=Ba(),s=a.length===1?a[0].promise:a.length>1?Promise.all(a.map(v=>v.promise)):null;function f(v){o();try{r(v)}catch(_){(l.f&Xe)===0&&lt(_,l)}er()}if(n.length===0){s.then(()=>f(t.map(i)));return}function d(){o(),Promise.all(n.map(v=>Ha(v))).then(v=>f([...t.map(i),...v])).catch(v=>lt(v,l))}s?s.then(d):d()}function Ba(){var e=z,t=P,n=me,r=I;return function(a=!0){Ue(e),Ie(t),Ut(n),a&&(r==null||r.activate())}}function er(e=!0){Ue(null),Ie(null),Ut(null),e&&(I==null||I.deactivate())}function za(){var e=z.b,t=I,n=e.is_rendered();return e.update_pending_count(1),t.increment(n),()=>{e.update_pending_count(-1),t.decrement(n)}}function Cn(e){var t=re|ie,n=P!==null&&(P.f&re)!==0?P:null;return z!==null&&(z.f|=It),{ctx:me,deps:null,effects:null,equals:Vr,f:t,fn:e,reactions:null,rv:0,v:te,wv:0,parent:n??z,ac:null}}function Ha(e,t,n){z===null&&na();var i=void 0,a=Dt(te),l=!P,o=new Map;return il(()=>{var _;var s=Br();i=s.promise;try{Promise.resolve(e()).then(s.resolve,s.reject).finally(er)}catch(b){s.reject(b),er()}var f=I;if(l){var d=za();(_=o.get(f))==null||_.reject(ht),o.delete(f),o.set(f,s)}const v=(b,g=void 0)=>{if(f.activate(),g)g!==ht&&(a.f|=st,Wt(a,g));else{(a.f&st)!==0&&(a.f^=st),Wt(a,b);for(const[T,h]of o){if(o.delete(T),T===f)break;h.reject(ht)}}d&&d()};s.promise.then(v,b=>v(null,b||"unknown"))}),dr(()=>{for(const s of o.values())s.reject(ht)}),new Promise(s=>{function f(d){function v(){d===i?s(a):f(i)}d.then(v,v)}f(i)})}function ni(e){const t=Cn(e);return wi(t),t}function ri(e){const t=Cn(e);return t.equals=Ur,t}function qa(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)oe(t[n])}}function Ga(e){for(var t=e.parent;t!==null;){if((t.f&re)===0)return(t.f&Xe)===0?t:null;t=t.parent}return null}function ur(e){var t,n=z;Ue(Ga(e));try{e.f&=~At,qa(e),t=xi(e)}finally{Ue(n)}return t}function ii(e){var t=ur(e);if(!e.equals(t)&&(e.wv=Ti(),(!(I!=null&&I.is_fork)||e.deps===null)&&(e.v=t,e.deps===null))){J(e,ee);return}ct||(ne!==null?(cr()||I!=null&&I.is_fork)&&ne.set(e,t):fr(e))}function Va(e){var t,n;if(e.effects!==null)for(const r of e.effects)(r.teardown||r.ac)&&((t=r.teardown)==null||t.call(r),(n=r.ac)==null||n.abort(ht),r.teardown=Zi,r.ac=null,an(r,0),hr(r))}function ai(e){if(e.effects!==null)for(const t of e.effects)t.teardown&&Kt(t)}let tr=new Set;const ot=new Map;let li=!1;function Dt(e,t){var n={f:0,v:e,reactions:null,equals:Vr,rv:0,wv:0};return n}function O(e,t){const n=Dt(e);return wi(n),n}function Ua(e,t=!1,n=!0){const r=Dt(e);return t||(r.equals=Ur),r}function p(e,t,n=!1){P!==null&&(!Fe||(P.f&kr)!==0)&&Wr()&&(P.f&(re|et|or|kr))!==0&&(De===null||!Gt.call(De,e))&&ca();let r=n?be(t):t;return Wt(e,r)}function Wt(e,t){if(!e.equals(t)){var n=e.v;ct?ot.set(e,t):ot.set(e,n),e.v=t;var r=$e.ensure();if(r.capture(e,n),(e.f&re)!==0){const i=e;(e.f&ie)!==0&&ur(i),fr(i)}e.wv=Ti(),si(e,ie),z!==null&&(z.f&ee)!==0&&(z.f&(Be|dt))===0&&(ke===null?sl([e]):ke.push(e)),!r.is_fork&&tr.size>0&&!li&&Wa()}return t}function Wa(){li=!1;for(const e of tr)(e.f&ee)!==0&&J(e,je),vn(e)&&Kt(e);tr.clear()}function tn(e){p(e,e.v+1)}function si(e,t){var n=e.reactions;if(n!==null)for(var r=n.length,i=0;i<r;i++){var a=n[i],l=a.f,o=(l&ie)===0;if(o&&J(a,t),(l&re)!==0){var s=a;ne==null||ne.delete(s),(l&At)===0&&(l&Ae&&(a.f|=At),si(s,je))}else o&&((l&et)!==0&&Oe!==null&&Oe.add(a),Re(a))}}function be(e){if(typeof e!="object"||e===null||Lt in e)return e;const t=jr(e);if(t!==Ki&&t!==Ji)return e;var n=new Map,r=sr(e),i=O(0),a=xt,l=o=>{if(xt===a)return o();var s=P,f=xt;Ie(null),Mr(a);var d=o();return Ie(s),Mr(f),d};return r&&n.set("length",O(e.length)),new Proxy(e,{defineProperty(o,s,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&fa();var d=n.get(s);return d===void 0?l(()=>{var v=O(f.value);return n.set(s,v),v}):p(d,f.value,!0),!0},deleteProperty(o,s){var f=n.get(s);if(f===void 0){if(s in o){const d=l(()=>O(te));n.set(s,d),tn(i)}}else p(f,te),tn(i);return!0},get(o,s,f){var b;if(s===Lt)return e;var d=n.get(s),v=s in o;if(d===void 0&&(!v||(b=Ct(o,s))!=null&&b.writable)&&(d=l(()=>{var g=be(v?o[s]:te),T=O(g);return T}),n.set(s,d)),d!==void 0){var _=c(d);return _===te?void 0:_}return Reflect.get(o,s,f)},getOwnPropertyDescriptor(o,s){var f=Reflect.getOwnPropertyDescriptor(o,s);if(f&&"value"in f){var d=n.get(s);d&&(f.value=c(d))}else if(f===void 0){var v=n.get(s),_=v==null?void 0:v.v;if(v!==void 0&&_!==te)return{enumerable:!0,configurable:!0,value:_,writable:!0}}return f},has(o,s){var _;if(s===Lt)return!0;var f=n.get(s),d=f!==void 0&&f.v!==te||Reflect.has(o,s);if(f!==void 0||z!==null&&(!d||(_=Ct(o,s))!=null&&_.writable)){f===void 0&&(f=l(()=>{var b=d?be(o[s]):te,g=O(b);return g}),n.set(s,f));var v=c(f);if(v===te)return!1}return d},set(o,s,f,d){var S;var v=n.get(s),_=s in o;if(r&&s==="length")for(var b=f;b<v.v;b+=1){var g=n.get(b+"");g!==void 0?p(g,te):b in o&&(g=l(()=>O(te)),n.set(b+"",g))}if(v===void 0)(!_||(S=Ct(o,s))!=null&&S.writable)&&(v=l(()=>O(void 0)),p(v,be(f)),n.set(s,v));else{_=v.v!==te;var T=l(()=>be(f));p(v,T)}var h=Reflect.getOwnPropertyDescriptor(o,s);if(h!=null&&h.set&&h.set.call(d,f),!_){if(r&&typeof s=="string"){var E=n.get("length"),A=Number(s);Number.isInteger(A)&&A>=E.v&&p(E,A+1)}tn(i)}return!0},ownKeys(o){c(i);var s=Reflect.ownKeys(o).filter(v=>{var _=n.get(v);return _===void 0||_.v!==te});for(var[f,d]of n)d.v!==te&&!(f in o)&&s.push(f);return s},setPrototypeOf(){ua()}})}function Sr(e){try{if(e!==null&&typeof e=="object"&&Lt in e)return e[Lt]}catch{}return e}function Ya(e,t){return Object.is(Sr(e),Sr(t))}var Ar,oi,fi,ui;function Ka(){if(Ar===void 0){Ar=window,oi=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;fi=Ct(t,"firstChild").get,ui=Ct(t,"nextSibling").get,Tr(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Tr(n)&&(n.__t=void 0)}}function ft(e=""){return document.createTextNode(e)}function Yt(e){return fi.call(e)}function dn(e){return ui.call(e)}function w(e,t){return Yt(e)}function Ja(e,t=!1){{var n=Yt(e);return n instanceof Comment&&n.data===""?dn(n):n}}function y(e,t=1,n=!1){let r=e;for(;t--;)r=dn(r);return r}function Za(e){e.textContent=""}function ci(){return!1}function Xa(e,t,n){return document.createElementNS(Gr,e,void 0)}function di(e,t){if(t){const n=document.body;e.autofocus=!0,Qe(()=>{document.activeElement===n&&e.focus()})}}let Dr=!1;function Qa(){Dr||(Dr=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function Ln(e){var t=P,n=z;Ie(null),Ue(null);try{return e()}finally{Ie(t),Ue(n)}}function vi(e,t,n,r=n){e.addEventListener(t,()=>Ln(n));const i=e.__on_r;i?e.__on_r=()=>{i(),r(!0)}:e.__on_r=()=>r(!0),Qa()}function $a(e){z===null&&(P===null&&la(),aa()),ct&&ia()}function el(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function We(e,t,n){var r=z;r!==null&&(r.f&pe)!==0&&(e|=pe);var i={ctx:me,deps:null,nodes:null,f:e|ie|Ae,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{Kt(i)}catch(o){throw oe(i),o}else t!==null&&Re(i);var a=i;if(n&&a.deps===null&&a.teardown===null&&a.nodes===null&&a.first===a.last&&(a.f&It)===0&&(a=a.first,(e&et)!==0&&(e&Vt)!==0&&a!==null&&(a.f|=Vt)),a!==null&&(a.parent=r,r!==null&&el(a,r),P!==null&&(P.f&re)!==0&&(e&dt)===0)){var l=P;(l.effects??(l.effects=[])).push(a)}return i}function cr(){return P!==null&&!Fe}function dr(e){const t=We(On,null,!1);return J(t,ee),t.teardown=e,t}function Rn(e){$a();var t=z.f,n=!P&&(t&Be)!==0&&(t&St)===0;if(n){var r=me;(r.e??(r.e=[])).push(e)}else return hi(e)}function hi(e){return We(cn|Qi,e,!1)}function tl(e){$e.ensure();const t=We(dt|It,e,!0);return()=>{oe(t)}}function nl(e){$e.ensure();const t=We(dt|It,e,!0);return(n={})=>new Promise(r=>{n.outro?kt(t,()=>{oe(t),r(void 0)}):(oe(t),r(void 0))})}function rl(e){return We(cn,e,!1)}function il(e){return We(or|It,e,!0)}function _i(e,t=0){return We(On|t,e,!0)}function $(e,t=[],n=[],r=[]){ja(r,t,n,i=>{We(On,()=>e(...i.map(c)),!0)})}function vr(e,t=0){var n=We(et|t,e,!0);return n}function Se(e){return We(Be|It,e,!0)}function gi(e){var t=e.teardown;if(t!==null){const n=ct,r=P;Ir(!0),Ie(null);try{t.call(null)}finally{Ir(n),Ie(r)}}}function hr(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const i=n.ac;i!==null&&Ln(()=>{i.abort(ht)});var r=n.next;(n.f&dt)!==0?n.parent=null:oe(n,t),n=r}}function al(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&Be)===0&&oe(t),t=n}}function oe(e,t=!0){var n=!1;(t||(e.f&Hr)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(ll(e.nodes.start,e.nodes.end),n=!0),hr(e,t&&!n),an(e,0),J(e,Xe);var r=e.nodes&&e.nodes.t;if(r!==null)for(const a of r)a.stop();gi(e);var i=e.parent;i!==null&&i.first!==null&&bi(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function ll(e,t){for(;e!==null;){var n=e===t?null:dn(e);e.remove(),e=n}}function bi(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function kt(e,t,n=!0){var r=[];pi(e,r,!0);var i=()=>{n&&oe(e),t&&t()},a=r.length;if(a>0){var l=()=>--a||i();for(var o of r)o.out(l)}else i()}function pi(e,t,n){if((e.f&pe)===0){e.f^=pe;var r=e.nodes&&e.nodes.t;if(r!==null)for(const o of r)(o.is_global||n)&&t.push(o);for(var i=e.first;i!==null;){var a=i.next,l=(i.f&Vt)!==0||(i.f&Be)!==0&&(e.f&et)!==0;pi(i,t,l?n:!1),i=a}}}function _r(e){mi(e,!0)}function mi(e,t){if((e.f&pe)!==0){e.f^=pe,(e.f&ee)===0&&(J(e,ie),Re(e));for(var n=e.first;n!==null;){var r=n.next,i=(n.f&Vt)!==0||(n.f&Be)!==0;mi(n,i?t:!1),n=r}var a=e.nodes&&e.nodes.t;if(a!==null)for(const l of a)(l.is_global||t)&&l.in()}}function yi(e,t){if(e.nodes)for(var n=e.nodes.start,r=e.nodes.end;n!==null;){var i=n===r?null:dn(n);t.append(n),n=i}}let xn=!1,ct=!1;function Ir(e){ct=e}let P=null,Fe=!1;function Ie(e){P=e}let z=null;function Ue(e){z=e}let De=null;function wi(e){P!==null&&(De===null?De=[e]:De.push(e))}let ce=null,he=0,ke=null;function sl(e){ke=e}let Ei=1,gt=0,xt=gt;function Mr(e){xt=e}function Ti(){return++Ei}function vn(e){var t=e.f;if((t&ie)!==0)return!0;if(t&re&&(e.f&=~At),(t&je)!==0){for(var n=e.deps,r=n.length,i=0;i<r;i++){var a=n[i];if(vn(a)&&ii(a),a.wv>e.wv)return!0}(t&Ae)!==0&&ne===null&&J(e,ee)}return!1}function ki(e,t,n=!0){var r=e.reactions;if(r!==null&&!(De!==null&&Gt.call(De,e)))for(var i=0;i<r.length;i++){var a=r[i];(a.f&re)!==0?ki(a,t,!1):t===a&&(n?J(a,ie):(a.f&ee)!==0&&J(a,je),Re(a))}}function xi(e){var T;var t=ce,n=he,r=ke,i=P,a=De,l=me,o=Fe,s=xt,f=e.f;ce=null,he=0,ke=null,P=(f&(Be|dt))===0?e:null,De=null,Ut(e.ctx),Fe=!1,xt=++gt,e.ac!==null&&(Ln(()=>{e.ac.abort(ht)}),e.ac=null);try{e.f|=Yn;var d=e.fn,v=d();e.f|=St;var _=e.deps,b=I==null?void 0:I.is_fork;if(ce!==null){var g;if(b||an(e,he),_!==null&&he>0)for(_.length=he+ce.length,g=0;g<ce.length;g++)_[he+g]=ce[g];else e.deps=_=ce;if(cr()&&(e.f&Ae)!==0)for(g=he;g<_.length;g++)((T=_[g]).reactions??(T.reactions=[])).push(e)}else!b&&_!==null&&he<_.length&&(an(e,he),_.length=he);if(Wr()&&ke!==null&&!Fe&&_!==null&&(e.f&(re|je|ie))===0)for(g=0;g<ke.length;g++)ki(ke[g],e);if(i!==null&&i!==e){if(gt++,i.deps!==null)for(let h=0;h<n;h+=1)i.deps[h].rv=gt;if(t!==null)for(const h of t)h.rv=gt;ke!==null&&(r===null?r=ke:r.push(...ke))}return(e.f&st)!==0&&(e.f^=st),v}catch(h){return Kr(h)}finally{e.f^=Yn,ce=t,he=n,ke=r,P=i,De=a,Ut(l),Fe=o,xt=s}}function ol(e,t){let n=t.reactions;if(n!==null){var r=Ui.call(n,e);if(r!==-1){var i=n.length-1;i===0?n=t.reactions=null:(n[r]=n[i],n.pop())}}if(n===null&&(t.f&re)!==0&&(ce===null||!Gt.call(ce,t))){var a=t;(a.f&Ae)!==0&&(a.f^=Ae,a.f&=~At),fr(a),Va(a),an(a,0)}}function an(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)ol(e,n[r])}function Kt(e){var t=e.f;if((t&Xe)===0){J(e,ee);var n=z,r=xn;z=e,xn=!0;try{(t&(et|zr))!==0?al(e):hr(e),gi(e);var i=xi(e);e.teardown=typeof i=="function"?i:null,e.wv=Ei;var a;Un&&Sa&&(e.f&ie)!==0&&e.deps}finally{xn=r,z=n}}}async function fl(){await Promise.resolve(),Ia()}function c(e){var t=e.f,n=(t&re)!==0;if(P!==null&&!Fe){var r=z!==null&&(z.f&Xe)!==0;if(!r&&(De===null||!Gt.call(De,e))){var i=P.deps;if((P.f&Yn)!==0)e.rv<gt&&(e.rv=gt,ce===null&&i!==null&&i[he]===e?he++:ce===null?ce=[e]:ce.push(e));else{(P.deps??(P.deps=[])).push(e);var a=e.reactions;a===null?e.reactions=[P]:Gt.call(a,P)||a.push(P)}}}if(ct&&ot.has(e))return ot.get(e);if(n){var l=e;if(ct){var o=l.v;return((l.f&ee)===0&&l.reactions!==null||Ai(l))&&(o=ur(l)),ot.set(l,o),o}var s=(l.f&Ae)===0&&!Fe&&P!==null&&(xn||(P.f&Ae)!==0),f=(l.f&St)===0;vn(l)&&(s&&(l.f|=Ae),ii(l)),s&&!f&&(ai(l),Si(l))}if(ne!=null&&ne.has(e))return ne.get(e);if((e.f&st)!==0)throw e.v;return e.v}function Si(e){if(e.f|=Ae,e.deps!==null)for(const t of e.deps)(t.reactions??(t.reactions=[])).push(e),(t.f&re)!==0&&(t.f&Ae)===0&&(ai(t),Si(t))}function Ai(e){if(e.v===te)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(ot.has(t)||(t.f&re)!==0&&Ai(t))return!0;return!1}function Fn(e){var t=Fe;try{return Fe=!0,e()}finally{Fe=t}}const ul=["touchstart","touchmove"];function cl(e){return ul.includes(e)}const bt=Symbol("events"),Di=new Set,nr=new Set;function dl(e,t,n,r={}){function i(a){if(r.capture||rr.call(t,a),!a.cancelBubble)return Ln(()=>n==null?void 0:n.call(this,a))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Qe(()=>{t.addEventListener(e,i,r)}):t.addEventListener(e,i,r),i}function pt(e,t,n,r,i){var a={capture:r,passive:i},l=dl(e,t,n,a);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&dr(()=>{t.removeEventListener(e,l,a)})}function F(e,t,n){(t[bt]??(t[bt]={}))[e]=n}function vt(e){for(var t=0;t<e.length;t++)Di.add(e[t]);for(var n of nr)n(e)}let Nr=null;function rr(e){var h,E;var t=this,n=t.ownerDocument,r=e.type,i=((h=e.composedPath)==null?void 0:h.call(e))||[],a=i[0]||e.target;Nr=e;var l=0,o=Nr===e&&e[bt];if(o){var s=i.indexOf(o);if(s!==-1&&(t===document||t===window)){e[bt]=t;return}var f=i.indexOf(t);if(f===-1)return;s<=f&&(l=s)}if(a=i[l]||e.target,a!==t){Wi(e,"currentTarget",{configurable:!0,get(){return a||n}});var d=P,v=z;Ie(null),Ue(null);try{for(var _,b=[];a!==null;){var g=a.assignedSlot||a.parentNode||a.host||null;try{var T=(E=a[bt])==null?void 0:E[r];T!=null&&(!a.disabled||e.target===a)&&T.call(a,e)}catch(A){_?b.push(A):_=A}if(e.cancelBubble||g===t||g===null)break;a=g}if(_){for(let A of b)queueMicrotask(()=>{throw A});throw _}}finally{e[bt]=t,delete e.currentTarget,Ie(d),Ue(v)}}}var Rr;const Hn=((Rr=globalThis==null?void 0:globalThis.window)==null?void 0:Rr.trustedTypes)&&globalThis.window.trustedTypes.createPolicy("svelte-trusted-html",{createHTML:e=>e});function vl(e){return(Hn==null?void 0:Hn.createHTML(e))??e}function Ii(e){var t=Xa("template");return t.innerHTML=vl(e.replaceAll("<!>","<!---->")),t.content}function Dn(e,t){var n=z;n.nodes===null&&(n.nodes={start:e,end:t,a:null,t:null})}function q(e,t){var n=(t&wa)!==0,r=(t&Ea)!==0,i,a=!e.startsWith("<!>");return()=>{i===void 0&&(i=Ii(a?e:"<!>"+e),n||(i=Yt(i)));var l=r||oi?document.importNode(i,!0):i.cloneNode(!0);if(n){var o=Yt(l),s=l.lastChild;Dn(o,s)}else Dn(l,l);return l}}function hl(e,t,n="svg"){var r=!e.startsWith("<!>"),i=`<${n}>${r?e:"<!>"+e}</${n}>`,a;return()=>{if(!a){var l=Ii(i),o=Yt(l);a=Yt(o)}var s=a.cloneNode(!0);return Dn(s,s),s}}function _l(e,t){return hl(e,t,"svg")}function Or(e=""){{var t=ft(e+"");return Dn(t,t),t}}function B(e,t){e!==null&&e.before(t)}function V(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n+"")}function gl(e,t){return bl(e,t)}const yn=new Map;function bl(e,{target:t,anchor:n,props:r={},events:i,context:a,intro:l=!0,transformError:o}){Ka();var s=void 0,f=nl(()=>{var d=n??t.appendChild(ft());Pa(d,{pending:()=>{}},b=>{Me({});var g=me;a&&(g.c=a),i&&(r.$$events=i),s=e(b,r)||{},Ne()},o);var v=new Set,_=b=>{for(var g=0;g<b.length;g++){var T=b[g];if(!v.has(T)){v.add(T);var h=cl(T);for(const S of[t,document]){var E=yn.get(S);E===void 0&&(E=new Map,yn.set(S,E));var A=E.get(T);A===void 0?(S.addEventListener(T,rr,{passive:h}),E.set(T,1)):E.set(T,A+1)}}}};return _(Nn(Di)),nr.add(_),()=>{var h;for(var b of v)for(const E of[t,document]){var g=yn.get(E),T=g.get(b);--T==0?(E.removeEventListener(b,rr),g.delete(b),g.size===0&&yn.delete(E)):g.set(b,T)}nr.delete(_),d!==n&&((h=d.parentNode)==null||h.removeChild(d))}});return pl.set(s,f),s}let pl=new WeakMap;var Ce,Ve,ge,Tt,fn,un,Mn;class ml{constructor(t,n=!0){He(this,"anchor");L(this,Ce,new Map);L(this,Ve,new Map);L(this,ge,new Map);L(this,Tt,new Set);L(this,fn,!0);L(this,un,()=>{var t=I;if(u(this,Ce).has(t)){var n=u(this,Ce).get(t),r=u(this,Ve).get(n);if(r)_r(r),u(this,Tt).delete(n);else{var i=u(this,ge).get(n);i&&(u(this,Ve).set(n,i.effect),u(this,ge).delete(n),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),r=i.effect)}for(const[a,l]of u(this,Ce)){if(u(this,Ce).delete(a),a===t)break;const o=u(this,ge).get(l);o&&(oe(o.effect),u(this,ge).delete(l))}for(const[a,l]of u(this,Ve)){if(a===n||u(this,Tt).has(a))continue;const o=()=>{if(Array.from(u(this,Ce).values()).includes(a)){var f=document.createDocumentFragment();yi(l,f),f.append(ft()),u(this,ge).set(a,{effect:l,fragment:f})}else oe(l);u(this,Tt).delete(a),u(this,Ve).delete(a)};u(this,fn)||!r?(u(this,Tt).add(a),kt(l,o,!1)):o()}}});L(this,Mn,t=>{u(this,Ce).delete(t);const n=Array.from(u(this,Ce).values());for(const[r,i]of u(this,ge))n.includes(r)||(oe(i.effect),u(this,ge).delete(r))});this.anchor=t,N(this,fn,n)}ensure(t,n){var r=I,i=ci();if(n&&!u(this,Ve).has(t)&&!u(this,ge).has(t))if(i){var a=document.createDocumentFragment(),l=ft();a.append(l),u(this,ge).set(t,{effect:Se(()=>n(l)),fragment:a})}else u(this,Ve).set(t,Se(()=>n(this.anchor)));if(u(this,Ce).set(r,t),i){for(const[o,s]of u(this,Ve))o===t?r.unskip_effect(s):r.skip_effect(s);for(const[o,s]of u(this,ge))o===t?r.unskip_effect(s.effect):r.skip_effect(s.effect);r.oncommit(u(this,un)),r.ondiscard(u(this,Mn))}else u(this,un).call(this)}}Ce=new WeakMap,Ve=new WeakMap,ge=new WeakMap,Tt=new WeakMap,fn=new WeakMap,un=new WeakMap,Mn=new WeakMap;function Z(e,t,n=!1){var r=new ml(e),i=n?Vt:0;function a(l,o){r.ensure(l,o)}vr(()=>{var l=!1;t((o,s=0)=>{l=!0,a(s,o)}),l||a(!1,null)},i)}function gr(e,t){return t}function yl(e,t,n){for(var r=[],i=t.length,a,l=t.length,o=0;o<i;o++){let v=t[o];kt(v,()=>{if(a){if(a.pending.delete(v),a.done.add(v),a.pending.size===0){var _=e.outrogroups;ir(Nn(a.done)),_.delete(a),_.size===0&&(e.outrogroups=null)}}else l-=1},!1)}if(l===0){var s=r.length===0&&n!==null;if(s){var f=n,d=f.parentNode;Za(d),d.append(f),e.items.clear()}ir(t,!s)}else a={pending:new Set(t),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(a)}function ir(e,t=!0){for(var n=0;n<e.length;n++)oe(e[n],t)}var Pr;function hn(e,t,n,r,i,a=null){var l=e,o=new Map,s=(t&qr)!==0;if(s){var f=e;l=f.appendChild(ft())}var d=null,v=ri(()=>{var E=n();return sr(E)?E:E==null?[]:Nn(E)}),_,b=!0;function g(){h.fallback=d,wl(h,_,l,t,r),d!==null&&(_.length===0?(d.f&Ze)===0?_r(d):(d.f^=Ze,$t(d,null,l)):kt(d,()=>{d=null}))}var T=vr(()=>{_=c(v);for(var E=_.length,A=new Set,S=I,R=ci(),k=0;k<E;k+=1){var H=_[k],W=r(H,k),U=b?null:o.get(W);U?(U.v&&Wt(U.v,H),U.i&&Wt(U.i,k),R&&S.unskip_effect(U.e)):(U=El(o,b?l:Pr??(Pr=ft()),H,W,k,i,t,n),b||(U.e.f|=Ze),o.set(W,U)),A.add(W)}if(E===0&&a&&!d&&(b?d=Se(()=>a(l)):(d=Se(()=>a(Pr??(Pr=ft()))),d.f|=Ze)),E>A.size&&ra(),!b)if(R){for(const[j,G]of o)A.has(j)||S.skip_effect(G.e);S.oncommit(g),S.ondiscard(()=>{})}else g();c(v)}),h={effect:T,items:o,outrogroups:null,fallback:d};b=!1}function Qt(e){for(;e!==null&&(e.f&Be)===0;)e=e.next;return e}function wl(e,t,n,r,i){var G,ae,m,M,ve,we,Ee,tt,nt;var a=(r&_a)!==0,l=t.length,o=e.items,s=Qt(e.effect.first),f,d=null,v,_=[],b=[],g,T,h,E;if(a)for(E=0;E<l;E+=1)g=t[E],T=i(g,E),h=o.get(T).e,(h.f&Ze)===0&&((ae=(G=h.nodes)==null?void 0:G.a)==null||ae.measure(),(v??(v=new Set)).add(h));for(E=0;E<l;E+=1){if(g=t[E],T=i(g,E),h=o.get(T).e,e.outrogroups!==null)for(const le of e.outrogroups)le.pending.delete(h),le.done.delete(h);if((h.f&Ze)!==0)if(h.f^=Ze,h===s)$t(h,null,n);else{var A=d?d.next:s;h===e.effect.last&&(e.effect.last=h.prev),h.prev&&(h.prev.next=h.next),h.next&&(h.next.prev=h.prev),rt(e,d,h),rt(e,h,A),$t(h,A,n),d=h,_=[],b=[],s=Qt(d.next);continue}if((h.f&pe)!==0&&(_r(h),a&&((M=(m=h.nodes)==null?void 0:m.a)==null||M.unfix(),(v??(v=new Set)).delete(h))),h!==s){if(f!==void 0&&f.has(h)){if(_.length<b.length){var S=b[0],R;d=S.prev;var k=_[0],H=_[_.length-1];for(R=0;R<_.length;R+=1)$t(_[R],S,n);for(R=0;R<b.length;R+=1)f.delete(b[R]);rt(e,k.prev,H.next),rt(e,d,k),rt(e,H,S),s=S,d=H,E-=1,_=[],b=[]}else f.delete(h),$t(h,s,n),rt(e,h.prev,h.next),rt(e,h,d===null?e.effect.first:d.next),rt(e,d,h),d=h;continue}for(_=[],b=[];s!==null&&s!==h;)(f??(f=new Set)).add(s),b.push(s),s=Qt(s.next);if(s===null)continue}(h.f&Ze)===0&&_.push(h),d=h,s=Qt(h.next)}if(e.outrogroups!==null){for(const le of e.outrogroups)le.pending.size===0&&(ir(Nn(le.done)),(ve=e.outrogroups)==null||ve.delete(le));e.outrogroups.size===0&&(e.outrogroups=null)}if(s!==null||f!==void 0){var W=[];if(f!==void 0)for(h of f)(h.f&pe)===0&&W.push(h);for(;s!==null;)(s.f&pe)===0&&s!==e.fallback&&W.push(s),s=Qt(s.next);var U=W.length;if(U>0){var j=(r&qr)!==0&&l===0?n:null;if(a){for(E=0;E<U;E+=1)(Ee=(we=W[E].nodes)==null?void 0:we.a)==null||Ee.measure();for(E=0;E<U;E+=1)(nt=(tt=W[E].nodes)==null?void 0:tt.a)==null||nt.fix()}yl(e,W,j)}}a&&Qe(()=>{var le,ze;if(v!==void 0)for(h of v)(ze=(le=h.nodes)==null?void 0:le.a)==null||ze.apply()})}function El(e,t,n,r,i,a,l,o){var s=(l&va)!==0?(l&ga)===0?Ua(n,!1,!1):Dt(n):null,f=(l&ha)!==0?Dt(i):null;return{v:s,i:f,e:Se(()=>(a(t,s??n,f??i,o),()=>{e.delete(r)}))}}function $t(e,t,n){if(e.nodes)for(var r=e.nodes.start,i=e.nodes.end,a=t&&(t.f&Ze)===0?t.nodes.start:n;r!==null;){var l=dn(r);if(a.before(r),r===i)return;r=l}}function rt(e,t,n){t===null?e.effect.first=n:t.next=n,n===null?e.effect.last=t:n.prev=t}function Mi(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Mi(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Tl(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Mi(e))&&(r&&(r+=" "),r+=t);return r}function kl(e){return typeof e=="object"?Tl(e):e??""}const Cr=[...` 	
\r\fÂ \v\uFEFF`];function xl(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var i of Object.keys(n))if(n[i])r=r?r+" "+i:i;else if(r.length)for(var a=i.length,l=0;(l=r.indexOf(i,l))>=0;){var o=l+a;(l===0||Cr.includes(r[l-1]))&&(o===r.length||Cr.includes(r[o]))?r=(l===0?"":r.substring(0,l))+r.substring(o+1):l=o}}return r===""?null:r}function Sl(e,t){return e==null?null:String(e)}function ln(e,t,n,r,i,a){var l=e.__className;if(l!==n||l===void 0){var o=xl(n,r,a);o==null?e.removeAttribute("class"):e.className=o,e.__className=n}else if(a&&i!==a)for(var s in a){var f=!!a[s];(i==null||f!==!!i[s])&&e.classList.toggle(s,f)}return a}function Al(e,t,n,r){var i=e.__style;if(i!==t){var a=Sl(t);a==null?e.removeAttribute("style"):e.style.cssText=a,e.__style=t}return r}function Ni(e,t,n=!1){if(e.multiple){if(t==null)return;if(!sr(t))return Ta();for(var r of e.options)r.selected=t.includes(nn(r));return}for(r of e.options){var i=nn(r);if(Ya(i,t)){r.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Dl(e){var t=new MutationObserver(()=>{Ni(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),dr(()=>{t.disconnect()})}function Jt(e,t,n=t){var r=new WeakSet,i=!0;vi(e,"change",a=>{var l=a?"[selected]":":checked",o;if(e.multiple)o=[].map.call(e.querySelectorAll(l),nn);else{var s=e.querySelector(l)??e.querySelector("option:not([disabled])");o=s&&nn(s)}n(o),I!==null&&r.add(I)}),rl(()=>{var a=t();if(e===document.activeElement){var l=An??I;if(r.has(l))return}if(Ni(e,a,i),i&&a===void 0){var o=e.querySelector(":checked");o!==null&&(a=nn(o),n(a))}e.__value=a,i=!1}),Dl(e)}function nn(e){return"__value"in e?e.__value:e.value}const Il=Symbol("is custom element"),Ml=Symbol("is html");function Oi(e,t){var n=Pi(e);n.checked!==(n.checked=t??void 0)&&(e.checked=t)}function Le(e,t,n,r){var i=Pi(e);i[t]!==(i[t]=n)&&(t==="loading"&&(e[ea]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Nl(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Pi(e){return e.__attributes??(e.__attributes={[Il]:e.nodeName.includes("-"),[Ml]:e.namespaceURI===Gr})}var Lr=new Map;function Nl(e){var t=e.getAttribute("is")||e.nodeName,n=Lr.get(t);if(n)return n;Lr.set(t,n=[]);for(var r,i=e,a=Element.prototype;a!==i;){r=Yi(i);for(var l in r)r[l].set&&n.push(l);i=jr(i)}return n}function Pt(e,t,n=t){var r=new WeakSet;vi(e,"input",async i=>{var a=i?e.defaultValue:e.value;if(a=qn(e)?Gn(a):a,n(a),I!==null&&r.add(I),await fl(),a!==(a=t())){var l=e.selectionStart,o=e.selectionEnd,s=e.value.length;if(e.value=a??"",o!==null){var f=e.value.length;l===o&&o===s&&f>s?(e.selectionStart=f,e.selectionEnd=f):(e.selectionStart=l,e.selectionEnd=Math.min(o,f))}}}),Fn(t)==null&&e.value&&(n(qn(e)?Gn(e.value):e.value),I!==null&&r.add(I)),_i(()=>{var i=t();if(e===document.activeElement){var a=An??I;if(r.has(a))return}qn(e)&&i===Gn(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function qn(e){var t=e.type;return t==="number"||t==="range"}function Gn(e){return e===""?null:+e}let wn=!1;function Ol(e){var t=wn;try{return wn=!1,[e(),wn]}finally{wn=t}}function de(e,t,n,r){var A;var i=(n&ma)!==0,a=(n&ya)!==0,l=r,o=!0,s=()=>(o&&(o=!1,l=a?Fn(r):r),l),f;if(i){var d=Lt in e||$i in e;f=((A=Ct(e,t))==null?void 0:A.set)??(d&&t in e?S=>e[t]=S:void 0)}var v,_=!1;i?[v,_]=Ol(()=>e[t]):v=e[t],v===void 0&&r!==void 0&&(v=s(),f&&(oa(),f(v)));var b;if(b=()=>{var S=e[t];return S===void 0?s():(o=!0,S)},(n&pa)===0)return b;if(f){var g=e.$$legacy;return(function(S,R){return arguments.length>0?((!R||g||_)&&f(R?b():S),S):b()})}var T=!1,h=((n&ba)!==0?Cn:ri)(()=>(T=!1,b()));i&&c(h);var E=z;return(function(S,R){if(arguments.length>0){const k=R?c(h):i?be(S):S;return p(h,k),T=!0,l!==void 0&&(l=k),S}return ct&&T||(E.f&Xe)!==0?h.v:c(h)})}function Pl(e){me===null&&ta(),Rn(()=>{const t=Fn(e);if(typeof t=="function")return t})}const Cl="5";var Fr;typeof window<"u"&&((Fr=window.__svelte??(window.__svelte={})).v??(Fr.v=new Set)).add(Cl);function Ll(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}let Sn=O(be(Ll()));tl(()=>{Rn(()=>{document.documentElement.setAttribute("data-theme",c(Sn))})});const Vn={get isDark(){return c(Sn)==="dark"},toggle(){p(Sn,c(Sn)==="dark"?"light":"dark",!0)}};let En=O(!1);const ut={get active(){return c(En)},toggle(){p(En,!c(En))},deactivate(){p(En,!1)}};var Rl=q('<header class="app-header"><div class="logo"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"></path></svg> SHELLY CONTROL</div> <label class="theme-toggle"><input type="checkbox"/> <span class="track"></span></label> <button> </button> <button class="btn btn-ghost">â¬† Import</button> <button class="btn btn-ghost">â¬‡ Export</button> <button class="btn btn-primary">+ GerÃ¤t</button></header>');function Fl(e,t){Me(t,!0);var n=Rl(),r=y(w(n),2),i=w(r),a=y(r,2);let l;var o=w(a),s=y(a,2),f=y(s,2),d=y(f,2);$(()=>{Le(r,"title",Vn.isDark?"Light Mode":"Dark Mode"),Oi(i,Vn.isDark),l=ln(a,1,"btn btn-ghost",null,l,{"btn-edit-active":ut.active}),V(o,`âœŽ ${ut.active?"Fertig":"Bearbeiten"}`)}),F("change",i,()=>Vn.toggle()),F("click",a,()=>ut.toggle()),F("click",s,()=>{var v;return(v=t.onimport)==null?void 0:v.call(t)}),F("click",f,()=>{var v;return(v=t.onexport)==null?void 0:v.call(t)}),F("click",d,()=>{var v;return(v=t.onadd)==null?void 0:v.call(t)}),B(e,n),Ne()}vt(["change","click"]);var jl=q('<span class="tab-actions"><button title="Tab umbenennen">âœŽ</button> <button title="Tab lÃ¶schen">ðŸ—‘</button></span>'),Bl=q('<div role="tab" tabindex="0"> <!></div>'),zl=q('<button class="add-tab-btn" title="Tab hinzufÃ¼gen">+ Tab</button>'),Hl=q('<div class="tab-bar"><!> <!></div>');function ql(e,t){Me(t,!0);let n=de(t,"tabs",19,()=>[]);var r=Hl(),i=w(r);hn(i,17,n,o=>o.id,(o,s)=>{var f=Bl();let d;var v=w(f),_=y(v);{var b=g=>{var T=jl(),h=w(T),E=y(h,2);F("click",T,A=>A.stopPropagation()),F("click",h,()=>{var A;return(A=t.onedit)==null?void 0:A.call(t,c(s))}),F("click",E,()=>{var A;return(A=t.ondelete)==null?void 0:A.call(t,c(s))}),B(g,T)};Z(_,g=>{ut.active&&g(b)})}$(()=>{d=ln(f,1,"tab-item",null,d,{active:c(s).id===t.activeTabId}),V(v,`${c(s).name??""} `)}),F("click",f,()=>{var g;return(g=t.onchange)==null?void 0:g.call(t,c(s).id)}),F("keydown",f,g=>{var T;return g.key==="Enter"&&((T=t.onchange)==null?void 0:T.call(t,c(s).id))}),B(o,f)});var a=y(i,2);{var l=o=>{var s=zl();F("click",s,()=>{var f;return(f=t.onadd)==null?void 0:f.call(t)}),B(o,s)};Z(a,o=>{ut.active&&o(l)})}B(e,r),Ne()}vt(["click","keydown"]);var Gl=_l('<rect fill="var(--sparkline-bar)" rx="1"></rect>'),Vl=q('<div class="sparkline-wrapper"><svg width="100%" preserveAspectRatio="none" aria-hidden="true"></svg> <span class="sparkline-label"> </span></div>');function Ul(e,t){Me(t,!0);let n=de(t,"history",19,()=>[]),r=de(t,"historyMinutes",3,10);const i=200,a=32,l=1;let o=ni(()=>{if(n().length===0)return[];const _=Math.max(...n().map(T=>T.watt),1),b=Math.max(n().length,1),g=Math.max(1,(i-(b-1)*l)/b);return n().map((T,h)=>{const E=Math.max(2,T.watt/_*(a-2));return{x:h*(g+l),y:a-E,w:g,h:E}})});var s=Vl(),f=w(s);Le(f,"viewBox","0 0 200 32"),Le(f,"height",a),hn(f,21,()=>c(o),gr,(_,b)=>{var g=Gl();$(()=>{Le(g,"x",c(b).x),Le(g,"y",c(b).y),Le(g,"width",c(b).w),Le(g,"height",c(b).h)}),B(_,g)});var d=y(f,2),v=w(d);$(()=>V(v,`â† ${r()??""} min`)),B(e,s),Ne()}let Ci=O(be([])),rn=O(be([])),ar=O(!0),Li=O(null);async function it(){try{const e=await fetch("/api/devices");if(!e.ok)throw new Error(`HTTP ${e.status}`);const t=await e.json();p(Ci,t.tabs,!0),p(rn,t.devices,!0),p(ar,!1)}catch(e){p(Li,e.message,!0),p(ar,!1)}}function Wl(){const e=new EventSource("/api/events");return e.addEventListener("device_update",t=>{const n=JSON.parse(t.data),r=c(rn).findIndex(i=>i.id===n.id);r!==-1&&(c(rn)[r]={...c(rn)[r],on:n.on,watt:n.watt,online:n.online})}),e.onerror=()=>{},e}const Y={get tabs(){return c(Ci)},get devices(){return c(rn)},get loading(){return c(ar)},get error(){return c(Li)},load:it,connectSSE:Wl,async toggle(e,t){await fetch(`/api/devices/${e}/toggle`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({on:t})})},async addDevice(e){const t=await fetch("/api/devices",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const n=await t.json();throw new Error(n.error)}await it()},async updateDevice(e,t){const n=await fetch(`/api/devices/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const r=await n.json();throw new Error(r.error)}await it()},async patchDevice(e,t){await fetch(`/api/devices/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),await it()},async deleteDevice(e){const t=await fetch(`/api/devices/${e}`,{method:"DELETE"});if(!t.ok){const n=await t.json();throw new Error(n.error)}await it()},async testDevice(e){return await(await fetch(`/api/devices/${e}/test`,{method:"POST"})).json()},async addTab(e){const t=await fetch("/api/tabs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const n=await t.json();throw new Error(n.error)}await it()},async updateTab(e,t){const n=await fetch(`/api/tabs/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const r=await n.json();throw new Error(r.error)}await it()},async deleteTab(e){const t=await fetch(`/api/tabs/${e}`,{method:"DELETE"});if(!t.ok){const n=await t.json();throw new Error(n.error)}await it()}};var Yl=q('<span class="drag-handle" title="Verschieben">â ¿</span>'),Kl=q('<div class="card-edit-actions"><button title="Bearbeiten">âœŽ</button> <button title="LÃ¶schen">ðŸ—‘</button></div>'),Jl=q('<div><div class="card-header"><!> <span class="card-name"> </span> <label class="relay-toggle"><input type="checkbox"/> <span class="track"></span></label></div> <div class="card-description"> </div> <div class="card-watt"> <span class="unit">W</span></div> <!> <!></div>');function Zl(e,t){Me(t,!0);let n=de(t,"historyMinutes",3,10),r=O(be([])),i=O(!1),a=O(!1);async function l(){try{const m=await fetch(`/api/devices/${t.device.id}/history`);m.ok&&p(r,await m.json(),!0)}catch{}}Rn(()=>{l();const m=setInterval(l,5e3);return()=>clearInterval(m)});async function o(m){if(!c(i)){p(i,!0);try{await Y.toggle(t.device.id,m.target.checked)}finally{p(i,!1)}}}function s(m){m.dataTransfer.setData("text/plain",t.device.id),m.dataTransfer.effectAllowed="move"}function f(m){m.preventDefault(),p(a,!0)}function d(){p(a,!1)}async function v(m){m.preventDefault(),p(a,!1);const M=m.dataTransfer.getData("text/plain");M&&M!==t.device.id&&await Y.patchDevice(M,{tab_id:t.device.tab_id})}var _=Jl();let b;var g=w(_),T=w(g);{var h=m=>{var M=Yl();B(m,M)};Z(T,m=>{ut.active&&m(h)})}var E=y(T,2),A=w(E),S=y(E,2),R=w(S),k=y(g,2),H=w(k),W=y(k,2),U=w(W),j=y(W,2);Ul(j,{get history(){return c(r)},get historyMinutes(){return n()}});var G=y(j,2);{var ae=m=>{var M=Kl(),ve=w(M),we=y(ve,2);F("click",ve,()=>{var Ee;return(Ee=t.onedit)==null?void 0:Ee.call(t,t.device)}),F("click",we,()=>{var Ee;return(Ee=t.ondelete)==null?void 0:Ee.call(t,t.device)}),B(m,M)};Z(G,m=>{ut.active&&m(ae)})}$(m=>{b=ln(_,1,"device-card",null,b,{offline:!t.device.online,"drag-over":c(a)}),Le(_,"draggable",ut.active),Le(E,"title",t.device.name),V(A,t.device.name),Le(S,"title",t.device.on?"Ausschalten":"Einschalten"),Oi(R,t.device.on),R.disabled=c(i)||!t.device.online,Le(k,"title",t.device.description),V(H,t.device.description||"Â "),V(U,`${m??""} `)},[()=>t.device.online?t.device.watt.toFixed(1):"â€”"]),pt("dragstart",_,s),pt("dragover",_,f),pt("dragleave",_,d),pt("drop",_,v),F("change",R,o),B(e,_),Ne()}vt(["change","click"]);var Xl=q('<div class="empty-state"><p>Keine GerÃ¤te in diesem Tab.</p></div>'),Ql=q('<div class="device-grid"></div>'),$l=q('<div class="device-grid-container"><!></div>');function es(e,t){Me(t,!0);let n=de(t,"devices",19,()=>[]),r=de(t,"historyMinutes",3,10),i=ni(()=>n().filter(f=>f.tab_id===t.activeTabId));var a=$l(),l=w(a);{var o=f=>{var d=Xl();B(f,d)},s=f=>{var d=Ql();hn(d,21,()=>c(i),v=>v.id,(v,_)=>{Zl(v,{get device(){return c(_)},get historyMinutes(){return r()},get onedit(){return t.onedit},get ondelete(){return t.ondelete}})}),B(f,d)};Z(l,f=>{c(i).length===0?f(o):f(s,!1)})}B(e,a),Ne()}var ts=q('<div class="field"><label>ID (unverÃ¤nderlich)</label> <input type="text" placeholder="z.B. s1r1"/></div>'),ns=q("<option> </option>"),rs=q('<div class="error-banner"> </div>'),is=q('<div class="error-banner"> </div>'),as=q('<div class="modal-backdrop"><div class="modal-box"><h2 class="modal-title"> </h2> <!> <div class="field"><label>Name</label> <input type="text" placeholder="z.B. S1R1"/></div> <div class="field"><label>IP-Adresse</label> <input type="text" placeholder="192.168.1.50"/></div> <div class="field"><label>Generation</label> <select><option>Gen 1 â€” Shelly Plug S</option><option>Gen 3 â€” Shelly Plug S MTR</option></select></div> <div class="field"><label>Tab</label> <select></select></div> <div class="field"><label>Beschreibung</label> <input type="text" placeholder="z.B. Dell PowerEdge R640"/></div> <!> <!> <div class="modal-actions"><button class="btn btn-ghost" style="margin-right: auto;"> </button> <button class="btn btn-secondary">Abbrechen</button> <button class="btn btn-primary"> </button></div></div></div>');function ls(e,t){var bn,Nt,Zt,Ot,pn,x,C;Me(t,!0);let n=de(t,"device",3,null),r=de(t,"tabs",19,()=>[]),i=de(t,"activeTabId",3,"");const a=n()!==null;let l=be({id:((bn=n())==null?void 0:bn.id)??"",name:((Nt=n())==null?void 0:Nt.name)??"",ip:((Zt=n())==null?void 0:Zt.ip)??"",generation:((Ot=n())==null?void 0:Ot.generation)??1,tab_id:((pn=n())==null?void 0:pn.tab_id)??i()??((x=r()[0])==null?void 0:x.id)??"",description:((C=n())==null?void 0:C.description)??""}),o=O(""),s=O(!1),f=O(!1),d=O(null);async function v(){var D;if(!l.name.trim()||!l.ip.trim()){p(o,"Name und IP sind Pflichtfelder");return}if(!a&&!l.id.trim()){p(o,"ID ist ein Pflichtfeld");return}p(s,!0),p(o,"");try{a?await Y.updateDevice(n().id,{...l,generation:Number(l.generation)}):await Y.addDevice({...l,generation:Number(l.generation)}),(D=t.onclose)==null||D.call(t)}catch(K){p(o,K.message,!0)}finally{p(s,!1)}}async function _(){if(l.ip){p(f,!0),p(d,null);try{if(a){const D=await Y.testDevice(n().id);p(d,D.ok?"Verbindung OK":`Fehler: ${D.error}`,!0)}else p(d,"Test nur nach dem Anlegen mÃ¶glich")}finally{p(f,!1)}}}var b=as(),g=w(b),T=w(g),h=w(T),E=y(T,2);{var A=D=>{var K=ts(),Te=y(w(K),2);Pt(Te,()=>l.id,se=>l.id=se),B(D,K)};Z(E,D=>{a||D(A)})}var S=y(E,2),R=y(w(S),2);di(R,a);var k=y(S,2),H=y(w(k),2),W=y(k,2),U=y(w(W),2),j=w(U);j.value=j.__value=1;var G=y(j);G.value=G.__value=3;var ae=y(W,2),m=y(w(ae),2);hn(m,21,r,gr,(D,K)=>{var Te=ns(),se=w(Te),Xt={};$(()=>{V(se,c(K).name),Xt!==(Xt=c(K).id)&&(Te.value=(Te.__value=c(K).id)??"")}),B(D,Te)});var M=y(ae,2),ve=y(w(M),2),we=y(M,2);{var Ee=D=>{var K=rs(),Te=w(K);$(()=>V(Te,c(o))),B(D,K)};Z(we,D=>{c(o)&&D(Ee)})}var tt=y(we,2);{var nt=D=>{var K=is(),Te=w(K);$(se=>{Al(K,se),V(Te,c(d))},[()=>c(d).startsWith("Verbindung")?"border-color: #48c774; color: #48c774; background: #48c77410;":""]),B(D,K)};Z(tt,D=>{c(d)&&D(nt)})}var le=y(tt,2),ze=w(le),_n=w(ze),gn=y(ze,2),Mt=y(gn,2),jn=w(Mt);$(()=>{V(h,a?"GerÃ¤t bearbeiten":"GerÃ¤t anlegen"),ze.disabled=c(f),V(_n,c(f)?"Testeâ€¦":"Verbindung testen"),Mt.disabled=c(s),V(jn,c(s)?"Speichernâ€¦":"Speichern")}),F("click",b,D=>{var K;D.target===D.currentTarget&&((K=t.onclose)==null||K.call(t))}),Pt(R,()=>l.name,D=>l.name=D),Pt(H,()=>l.ip,D=>l.ip=D),Jt(U,()=>l.generation,D=>l.generation=D),Jt(m,()=>l.tab_id,D=>l.tab_id=D),Pt(ve,()=>l.description,D=>l.description=D),F("click",ze,_),F("click",gn,function(...D){var K;(K=t.onclose)==null||K.apply(this,D)}),F("click",Mt,v),B(e,b),Ne()}vt(["click"]);var ss=q('<div class="field"><label>ID (unverÃ¤nderlich)</label> <input type="text" placeholder="z.B. rack3"/></div>'),os=q('<div class="error-banner"> </div>'),fs=q('<div class="modal-backdrop"><div class="modal-box"><h2 class="modal-title"> </h2> <!> <div class="field"><label>Name</label> <input type="text" placeholder="z.B. Rack 3"/></div> <!> <div class="modal-actions"><button class="btn btn-secondary">Abbrechen</button> <button class="btn btn-primary"> </button></div></div></div>');function us(e,t){var W,U;Me(t,!0);let n=de(t,"tab",3,null);const r=n()!==null;let i=O(be(((W=n())==null?void 0:W.name)??"")),a=O(be(((U=n())==null?void 0:U.id)??"")),l=O(""),o=O(!1);async function s(){var j;if(!c(i).trim()){p(l,"Name ist Pflicht");return}p(o,!0),p(l,"");try{if(r)await Y.updateTab(n().id,{id:n().id,name:c(i).trim(),order:n().order});else{if(!c(a).trim()){p(l,"ID ist Pflicht"),p(o,!1);return}await Y.addTab({id:c(a).trim(),name:c(i).trim(),order:99})}(j=t.onclose)==null||j.call(t)}catch(G){p(l,G.message,!0)}finally{p(o,!1)}}var f=fs(),d=w(f),v=w(d),_=w(v),b=y(v,2);{var g=j=>{var G=ss(),ae=y(w(G),2);Pt(ae,()=>c(a),m=>p(a,m)),B(j,G)};Z(b,j=>{r||j(g)})}var T=y(b,2),h=y(w(T),2);di(h,!0);var E=y(T,2);{var A=j=>{var G=os(),ae=w(G);$(()=>V(ae,c(l))),B(j,G)};Z(E,j=>{c(l)&&j(A)})}var S=y(E,2),R=w(S),k=y(R,2),H=w(k);$(()=>{V(_,r?"Tab umbenennen":"Tab anlegen"),k.disabled=c(o),V(H,c(o)?"Speichernâ€¦":"Speichern")}),F("click",f,j=>{var G;j.target===j.currentTarget&&((G=t.onclose)==null||G.call(t))}),Pt(h,()=>c(i),j=>p(i,j)),F("click",R,function(...j){var G;(G=t.onclose)==null||G.apply(this,j)}),F("click",k,s),B(e,f),Ne()}vt(["click"]);var cs=q('<div class="error-banner"> </div>'),ds=q("<tr><td> </td><td> </td><td> </td><td> </td><td> </td><td> </td></tr>"),vs=q('<div style="overflow-x: auto; max-height: 300px; overflow-y: auto;"><table class="import-table"><thead><tr><th>Status</th><th>Name</th><th>IP</th><th>Gen</th><th>Tab</th><th>Beschreibung</th></tr></thead><tbody></tbody></table></div>'),hs=q('<div class="modal-backdrop"><div class="modal-box modal-wide"><h2 class="modal-title">Konfiguration importieren</h2> <div role="button" tabindex="0"><!></div> <input id="import-file-input" type="file" accept=".json,.csv" style="display:none"/> <div style="display: flex; gap: 1rem;"><div class="field" style="flex: 1;"><label>Format</label> <select><option>JSON</option><option>CSV</option></select></div> <div class="field" style="flex: 1;"><label>Modus</label> <select><option>Nur neue hinzufÃ¼gen</option><option>Bestehende Ã¼berschreiben</option><option>Alles ersetzen</option></select></div></div> <!> <!> <div class="modal-actions"><button class="btn btn-ghost" style="margin-right: auto;">Vorschau laden</button> <button class="btn btn-secondary">Abbrechen</button> <button class="btn btn-primary"> </button></div></div></div>');function _s(e,t){Me(t,!0);let n=O("json"),r=O("add"),i=O(null),a=O(!1),l=O(""),o=O(!1),s=O(""),f=O("");function d(x){x.preventDefault(),p(o,!0)}function v(){p(o,!1)}function _(x){x.preventDefault(),p(o,!1);const C=x.dataTransfer.files[0];C&&g(C)}function b(x){const C=x.target.files[0];C&&g(C)}function g(x){p(f,x.name,!0),x.name.endsWith(".csv")?p(n,"csv"):p(n,"json");const C=new FileReader;C.onload=D=>{p(s,D.target.result,!0)},C.readAsText(x)}async function T(){if(!c(s)){p(l,"Bitte Datei auswÃ¤hlen");return}p(a,!0),p(l,"");try{const x=await fetch(`/api/import?format=${c(n)}&mode=${c(r)}&preview=true`,{method:"POST",headers:{"Content-Type":c(n)==="csv"?"text/csv":"application/json"},body:c(s)});if(!x.ok){const C=await x.json();throw new Error(C.error)}p(i,await x.json(),!0)}catch(x){p(l,x.message,!0)}finally{p(a,!1)}}async function h(){var x;if(!c(s)){p(l,"Bitte Datei auswÃ¤hlen");return}p(a,!0),p(l,"");try{const C=await fetch(`/api/import?format=${c(n)}&mode=${c(r)}`,{method:"POST",headers:{"Content-Type":c(n)==="csv"?"text/csv":"application/json"},body:c(s)});if(!C.ok){const D=await C.json();throw new Error(D.error)}(x=t.onclose)==null||x.call(t)}catch(C){p(l,C.message,!0)}finally{p(a,!1)}}const E={new:"Neu",update:"Update",unchanged:"UnverÃ¤ndert",error:"Fehler"},A={new:"status-new",update:"status-update",unchanged:"status-unchanged",error:"status-error"};var S=hs(),R=w(S),k=y(w(R),2);let H;var W=w(k);{var U=x=>{var C=Or();$(()=>V(C,`ðŸ“„ ${c(f)??""}`)),B(x,C)},j=x=>{var C=Or("Datei hierher ziehen oder klicken zum AuswÃ¤hlen");B(x,C)};Z(W,x=>{c(f)?x(U):x(j,!1)})}var G=y(k,2),ae=y(G,2),m=w(ae),M=y(w(m),2),ve=w(M);ve.value=ve.__value="json";var we=y(ve);we.value=we.__value="csv";var Ee=y(m,2),tt=y(w(Ee),2),nt=w(tt);nt.value=nt.__value="add";var le=y(nt);le.value=le.__value="overwrite";var ze=y(le);ze.value=ze.__value="replace";var _n=y(ae,2);{var gn=x=>{var C=cs(),D=w(C);$(()=>V(D,c(l))),B(x,C)};Z(_n,x=>{c(l)&&x(gn)})}var Mt=y(_n,2);{var jn=x=>{var C=vs(),D=w(C),K=y(w(D));hn(K,21,()=>c(i),gr,(Te,se)=>{var Xt=ds(),Bn=w(Xt),Ri=w(Bn),pr=y(Bn),Fi=w(pr),mr=y(pr),ji=w(mr),yr=y(mr),Bi=w(yr),wr=y(yr),zi=w(wr),Hi=y(wr),qi=w(Hi);$(()=>{ln(Bn,1,kl(A[c(se).status])),V(Ri,`${E[c(se).status]??""}${c(se).error?`: ${c(se).error}`:""}`),V(Fi,c(se).name),V(ji,c(se).ip),V(Bi,c(se).generation),V(zi,c(se).tab),V(qi,c(se).description)}),B(Te,Xt)}),B(x,C)};Z(Mt,x=>{c(i)&&x(jn)})}var bn=y(Mt,2),Nt=w(bn),Zt=y(Nt,2),Ot=y(Zt,2),pn=w(Ot);$(()=>{H=ln(k,1,"dropzone",null,H,{"drag-active":c(o)}),Nt.disabled=c(a)||!c(s),Ot.disabled=c(a)||!c(s),V(pn,c(a)?"Importiereâ€¦":"â¬† Importieren")}),F("click",S,x=>{var C;x.target===x.currentTarget&&((C=t.onclose)==null||C.call(t))}),pt("dragover",k,d),pt("dragleave",k,v),pt("drop",k,_),F("click",k,()=>document.getElementById("import-file-input").click()),F("change",G,b),Jt(M,()=>c(n),x=>p(n,x)),Jt(tt,()=>c(r),x=>p(r,x)),F("click",Nt,T),F("click",Zt,function(...x){var C;(C=t.onclose)==null||C.apply(this,x)}),F("click",Ot,h),B(e,S),Ne()}vt(["click","change"]);var gs=q('<div class="modal-backdrop"><div class="modal-box"><h2 class="modal-title">Konfiguration exportieren</h2> <div class="field"><label>Format</label> <select><option>JSON</option><option>CSV</option></select></div> <div class="field"><label>Umfang</label> <select><option>Alle Tabs</option><option> </option></select></div> <div class="modal-actions"><button class="btn btn-secondary">Abbrechen</button> <button class="btn btn-primary">â¬‡ Exportieren</button></div></div></div>');function bs(e,t){Me(t,!0);let n=de(t,"tabs",19,()=>[]),r=de(t,"activeTabId",3,""),i=O("json"),a=O("all");function l(){var H;const k=`/api/export?format=${c(i)}&scope=${c(a)==="active"?r():"all"}`;window.location.href=k,(H=t.onclose)==null||H.call(t)}var o=gs(),s=w(o),f=y(w(s),2),d=y(w(f),2),v=w(d);v.value=v.__value="json";var _=y(v);_.value=_.__value="csv";var b=y(f,2),g=y(w(b),2),T=w(g);T.value=T.__value="all";var h=y(T),E=w(h);h.value=h.__value="active";var A=y(b,2),S=w(A),R=y(S,2);$(k=>V(E,`Nur aktiver Tab (${k??""})`),[()=>{var k;return((k=n().find(H=>H.id===r()))==null?void 0:k.name)??""}]),F("click",o,k=>{var H;k.target===k.currentTarget&&((H=t.onclose)==null||H.call(t))}),Jt(d,()=>c(i),k=>p(i,k)),Jt(g,()=>c(a),k=>p(a,k)),F("click",S,function(...k){var H;(H=t.onclose)==null||H.apply(this,k)}),F("click",R,l),B(e,o),Ne()}vt(["click"]);var ps=q('<div class="modal-backdrop"><div class="modal-box"><h2 class="modal-title"> </h2> <p style="color: var(--text-secondary); margin: 0;"> </p> <div class="modal-actions"><button class="btn btn-secondary">Abbrechen</button> <button class="btn btn-danger">LÃ¶schen</button></div></div></div>');function ms(e,t){Me(t,!0);let n=de(t,"title",3,"BestÃ¤tigen"),r=de(t,"message",3,"");var i=ps(),a=w(i),l=w(a),o=w(l),s=y(l,2),f=w(s),d=y(s,2),v=w(d),_=y(v,2);$(()=>{V(o,n()),V(f,r())}),F("click",i,b=>{var g;b.target===b.currentTarget&&((g=t.oncancel)==null||g.call(t))}),F("click",v,function(...b){var g;(g=t.oncancel)==null||g.apply(this,b)}),F("click",_,function(...b){var g;(g=t.onconfirm)==null||g.apply(this,b)}),B(e,i),Ne()}vt(["click"]);var ys=q('<div class="empty-state">Lade GerÃ¤teâ€¦</div>'),ws=q('<div class="device-grid-container"><div class="error-banner"> </div></div>'),Es=q("<!> <!> <!> <!> <!> <!> <!> <!>",1);function Ts(e,t){Me(t,!0);let n=O(""),r=10,i=O(null);Pl(async()=>{await Y.load(),Y.tabs.length>0&&!c(n)&&p(n,Y.tabs[0].id,!0);const m=Y.connectSSE();return()=>m.close()}),Rn(()=>{Y.tabs.length>0&&(Y.tabs.some(M=>M.id===c(n))||p(n,Y.tabs[0].id,!0))});function a(){p(i,{type:"device",data:null},!0)}function l(m){p(i,{type:"device",data:m},!0)}function o(m){p(i,{type:"confirm",title:"GerÃ¤t lÃ¶schen",message:`GerÃ¤t â€ž${m.name}" wirklich lÃ¶schen?`,onconfirm:async()=>{await Y.deleteDevice(m.id),p(i,null)}},!0)}function s(){p(i,{type:"tab",data:null},!0)}function f(m){p(i,{type:"tab",data:m},!0)}function d(m){p(i,{type:"confirm",title:"Tab lÃ¶schen",message:`Tab â€ž${m.name}" wirklich lÃ¶schen? (Nur mÃ¶glich wenn leer)`,onconfirm:async()=>{try{await Y.deleteTab(m.id)}catch(M){alert(M.message)}p(i,null)}},!0)}var v=Es(),_=Ja(v);Fl(_,{onimport:()=>{p(i,{type:"import"},!0)},onexport:()=>{p(i,{type:"export"},!0)},onadd:a});var b=y(_,2);ql(b,{get tabs(){return Y.tabs},get activeTabId(){return c(n)},onchange:m=>{p(n,m,!0)},onedit:f,ondelete:d,onadd:s});var g=y(b,2);{var T=m=>{var M=ys();B(m,M)},h=m=>{var M=ws(),ve=w(M),we=w(ve);$(()=>V(we,`Fehler: ${Y.error??""}`)),B(m,M)},E=m=>{es(m,{get devices(){return Y.devices},get activeTabId(){return c(n)},historyMinutes:r,onedit:l,ondelete:o})};Z(g,m=>{Y.loading?m(T):Y.error?m(h,1):m(E,!1)})}var A=y(g,2);{var S=m=>{ls(m,{get device(){return c(i).data},get tabs(){return Y.tabs},get activeTabId(){return c(n)},onclose:()=>{p(i,null)}})};Z(A,m=>{var M;((M=c(i))==null?void 0:M.type)==="device"&&m(S)})}var R=y(A,2);{var k=m=>{us(m,{get tab(){return c(i).data},onclose:()=>{p(i,null)}})};Z(R,m=>{var M;((M=c(i))==null?void 0:M.type)==="tab"&&m(k)})}var H=y(R,2);{var W=m=>{_s(m,{onclose:()=>{p(i,null),Y.load()}})};Z(H,m=>{var M;((M=c(i))==null?void 0:M.type)==="import"&&m(W)})}var U=y(H,2);{var j=m=>{bs(m,{get tabs(){return Y.tabs},get activeTabId(){return c(n)},onclose:()=>{p(i,null)}})};Z(U,m=>{var M;((M=c(i))==null?void 0:M.type)==="export"&&m(j)})}var G=y(U,2);{var ae=m=>{ms(m,{get title(){return c(i).title},get message(){return c(i).message},get onconfirm(){return c(i).onconfirm},oncancel:()=>{p(i,null)}})};Z(G,m=>{var M;((M=c(i))==null?void 0:M.type)==="confirm"&&m(ae)})}B(e,v),Ne()}gl(Ts,{target:document.getElementById("app")});
